!function($){$.wnf=function(options){var F="function",S="string",getNotification=function(){var id="",n=_self.settings.notification;return n.tag&&typeof n.tag===S&&(id="wn-"+n.tag),'<div id="'+id+'" class="wn-box"><div class="wn-head"><span class="wn-host">'+window.location.host+'</span><span class="wn-close"></span></div>'+getBody()+"</div>"},getBody=function(extra){var img="",n=_self.settings.notification;return n.icon&&typeof n.icon===S&&(img='<img src="'+n.icon+'" class="wn-icon" />'),'<div class="wn-body '+extra+'">'+img+'<div class="wn-message '+n.dir+'"><h5>'+n.ntitle+"</h5><p>"+n.nbody+'</p></div><div class="clear"></div></div>'},bindOnClickFn=function($b,fn){typeof fn===F&&$b.find(".wn-body").last().click(function(){fn()})},removeNotification=function($notification,$sep){"undefined"!=typeof $sep&&$sep.animate({opacity:0},750,function(){$sep.remove()}),$notification.animate({opacity:0},750,function(){$notification.remove(),typeof _self.settings.onCloseFn===F&&_self.settings.onCloseFn()})},_self=this,defaults={position:"bottom right",autoclose:!1,expire:0,notification:{ntitle:"",nbody:"",icon:"",tag:"",dir:"rtl"},onShowFn:$.noop,onClickFn:$.noop,onCloseFn:$.noop};_self.settings={},function(){_self.settings=$.extend({},defaults,options);var newNotification,$notContainer,$notBox,s=_self.settings,n=s.notification,p=s.position;if(!n.ntitle||!n.nbody)throw"Title, and message of the notification are required parameters.";$notContainer=$("#wn-"+p.replace(/ /g,"")),$notBox=$("#wn-"+n.tag),0===$notContainer.length&&($notContainer=$('<div id="wn-'+p.replace(/ /g,"")+'" class="wn-container '+p+'"></div>').appendTo("body")),_self.settings.notification.tag&&typeof _self.settings.notification.tag===S&&0!==$notBox.length?(newNotification='<table class="wn-sep"><tr><td><hr/></td><td class="circle"><span class="wn-close"></span></td><td><hr/></td></tr></table>'+getBody("hidden"),$notBox.append(newNotification),$notBox.find("table.wn-sep").last().animate({opacity:1},750),$notBox.find(".wn-body").last().animate({opacity:1},750,function(){var $remover=$notBox.find(".wn-close").last();$remover.click(function(){var $sep=$(this).parents("table.wn-sep");removeNotification($sep.next(".wn-body"),$sep)}),bindOnClickFn($notBox,s.onClickFn),typeof s.onShowFn===F&&s.onShowFn(),s.autoclose&&setTimeout(function(){removeNotification($remover.parents("table.wn-sep").next(".wn-body"),$remover.parents("table.wn-sep"))},s.expire)})):(newNotification=getNotification(),$notContainer.append(newNotification),$notContainer.find(".wn-box").last().animate({opacity:1},750,function(){var $box=$(this);$box.find(".wn-head .wn-close").click(function(){removeNotification($box)}),bindOnClickFn($box,s.onClickFn),typeof s.onShowFn===F&&s.onShowFn(),s.autoclose&&setTimeout(function(){if(0==$box.find("table.wn-sep").length)removeNotification($box);else{var $firstNotification=$box.find(".wn-body").first();removeNotification($firstNotification,$firstNotification.next("table.wn-sep"))}},s.expire)}))}()}}(jQuery);